<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="assets/ico/favicon.png">

    <title>Реферат 101</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">

    <!-- Custom styles for this template -->
    <link href="assets/css/main.css" rel="stylesheet">
	<link rel="stylesheet" href="assets/css/font-awesome.min.css">

    <script src="assets/js/jquery.min.js"></script>
	<script src="assets/js/modernizr.custom.js"></script>
	

	
    <link href='http://fonts.googleapis.com/css?family=Oswald:400,300,700' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=EB+Garamond' rel='stylesheet' type='text/css'>

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="assets/js/html5shiv.js"></script>
      <script src="assets/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body data-spy="scroll" data-offset="0" data-target="#theMenu">
		
	<!-- Menu -->
	<nav class="menu" id="theMenu">
		<div class="menu-wrap">
			<h1 class="logo"><a href="index.html#home">Навигация</a></h1>
			<i class="icon-remove menu-close"></i>
			<a href="#home" class="smoothScroll">Начало</a>
			<a href="#about" class="smoothScroll">Съдържание</a>
			<a href="#intro" class="smoothScroll">Въведение</a>
			<a href="#code" class="smoothScroll">Инжектиране на код</a>
			<a href="#crlf" class="smoothScroll">CRLF инжекции</a>
			<a href="#mail" class="smoothScroll">Имейл инжекции</a>
			<a href="#header" class="smoothScroll">Хедър атака срещу хоста</a>
			<a href="#ldap" class="smoothScroll">LDAP инжекции</a>
			<a href="#shell" class="smoothScroll">Инжекции на шел команди</a>
			<a href="#xpath" class="smoothScroll">Xpath инжекции</a>
			<a href="#lit" class="smoothScroll">Използвана литература</a>
		</div>
		
		<!-- Menu button -->
		<div id="menuToggle"><i class="icon-reorder"></i></div>
	</nav>


	
	<!-- ========== HEADER SECTION ========== -->
	<section id="home" name="home"></section>
	<div id="headerwrap">
		<div class="container">
			<div class="row">
				<h1>Уязвимости в уеб приложения - инжекции (OWASP-A1). Примери.</h1>
				<br/>
				<h3>Тема 101</h3>
				<br/>
				<br/>
				<div class="col-lg-6 col-lg-offset-3">
				</div>
			</div>
		</div><!-- /container -->
	</div><!-- /headerwrap -->
	
	
	
	<!-- ========== Съдържание ========== -->
	<section id="about" name="about"></section>
	<div id="f">
		<div class="container">
			<div class="row">
				<h3>Съдържание</h3>
				<div style="text-align:left">
					<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
					
					<!-- INTRO INFORMATIO-->
				
					<div class="col-lg-6 col-lg-offset-3">
						<ol> 
							<h4><li><a href="#intro">Въведение</a></li></h4>
							
							<h4><li><a href="#code">Инжектиране на код</a> <br/>
								<ol type="a">
									<h4><li><a href="#code1">Какво представлява инжектиране на код</a></li></h4>
									<h4><li><a href="#code2">Изпълнение на системни команди</a></li></h4>
									<h4><li><a href="#code3">Намиране и предотвратяване на инжектиран код</a></li></h4>
								</ol>
							</li></h4>
							
							<h4><li><a href="#crlf">CRLF инжекции</a> <br/>
								<ol type="a">
									<h4><li>Какво представлява CRLF</li></h4>
									<h4><li>Какво представлява разцепване на http заявка</li></h4>
									<h4><li>Откриване на CRLF инжекция</li></h4>
									<h4><li>Защита от CRLF инжекции</li></h4>
								</ol>
							</li></h4>

							<h4><li><a href="#mail">Имейл инжекции</a> <br/>
								<ol type="a">
									<h4><li>Какво представлява имейл инжекция</li></h4>
									<h4><li>Как работи SMTP</li></h4>
									<h4><li>Уязвим код</li></h4>
									<h4><li>Намиране на уязвим код</li></h4>
									<h4><li>Превенция</li></h4>
								</ol>
							</li></h4>
							
							<h4><li><a href="#header">Хедър атака срещу хоста</a> <br/>
								<ol type="a">
									<h4><li>Какво представлява хедър атака срещу хоста</li></h4>
									<h4><li>Отравяме ма кеша</li></h4>
									<h4><li>Отравяне на password reset</li></h4>
									<h4><li>Откриване на уязвимости за отравяне на password reset</li></h4>
									<h4><li>Превенция</li></h4>
								</ol>
							</li></h4>

							<h4><li><a href="#ldap">LDAP инжекции</a></h4></li>
							
							<h4><li><a href="#shell">Инжекции на шел команди</a> <br/>
							<ol type="a">
								<h4><li>Какво представлява нжекция на шел команди</li></h4>
								<h4><li>Пример за инжекция на шел команда</li></h4>
								<h4><li>Инжекция чрез специални символи</li></h4>
								<h4><li>Защита от инжекции на шел команди</li></h4>
							</ol>
							</li></h4>
							
							<h4><li><a href="#xpath">Xpath инжекции</a></h4></li>
							
							<h4><li><a href="#lit">Използвана литература</a></h4></li>
						</ol>
					</div>								
				</div>
			</div>
		</div><!-- /container -->
	</div><!-- /f -->
	

	<!-- ========== Въведение ========== -->	
	<section id="intro" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>Въведение</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>

                                <div class="col-lg-6 col-lg-offset-3">

				<p>Атаките от тип инжекция са обощение за множество различни техники за постигане на желан ефект чрез надхитряне на дадена система. При атака чрез инжекция, атакуващият вкарва нежелани данни в дадена програма. Инжектираните данни се обработват от системата като обикновени такива. В резултат на това се получава нежелан от потребителя изход, от който атакуващият може да се възползва.</p>
				<p>Инжекциите са сред най-старите инструменти за атака над уеб приложения. Те водят до за кражба на данни, загуба на данни, загуба на цялостност на данни, отказ в системата, както и цялостно сриване на системата. Най-честата причина за уязвимост към инжекции е слабо валидиране на потребителски вход.</p>
<p>Този тип атака се смята за един от най-големите проблеми в киберсигурността. OWASP Top 10 я поставя на първо място като опасност в интернет заплахите, при това с основание. Атаките чрез инжекции, най-вече SQL инжекции (SQLi атаки) и скриптове през сайтове (XSS), са не само опасни, но и много разпространени, особено в остарелите legacy приложения. В този доклад няма да говоря за XSS, защото друг колега има такава тема, а не трябва да се припокриваме.</p>
<p>Това, което прави атаките чрез инжекции толкова трудни за предотвратяване е огромната площ, по която те могат да се случат (особено  XSS и SQL атаките). Също така този тип атаки са много добре анализиран и ясен проблем, който позволява на злонамерените лица да знаят точно какво правят. Поради тази причина съществуват множество отлични инструменти, които позволяват дори на хора с малък опит да намират такива слабости и да се възползват от тях.</p>
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->
	
	<!-- ========== Инжектиране на код ========== -->	
	<section id="code" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>Инжектиране на код</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				<div class="col-lg-6 col-lg-offset-3">
				<h4 id="code1">Какво представлява инжектиране на код</h4>	
				<p>Инжектирането на код или изпълнението на код от разстояние (RCE) позволява на атакуващият да изпълни злонамерен код като резултат от атака чрез инжекция. Атаките чрез инжекция на код са различни от атаките чрез инжекция на системни команди.Възможностите за атакуващия зависят от ограниченията на сървър-клиент интерпретатора(например PHP, Python, и други). В някои случаи, атакуващият може да е способен да стигне от инжекция на код до инжекция на системни команди.</p>
				<p>Обикновено, инжекции на код се случват, когато приложение обработва входни данни без предварително да ги валидира. Ето примерн код на PHP приложение като пример за уязвимост от инжекция на код:<p>

				<div style="text-align:left">
					<p>/**</p>
					<p>* Get the code from a GET input</p>
					<p>* Example - http://example.com/?code=phpinfo();</p>
					<p>*/</p>
					<p>$code = $_GET['code'];</p>
					<p></p>
					<p>/**</p>
					<p>* Unsafely evaluate the code</p>
					<p>* Example - phpinfo();</p>
					<p>*/</p>
					<p>eval("\$code;");</p>
					<p></p>
				</div>
				<p>На основа горния пример, атакуващият би могъл да използва следния трик, за да изпълни PHP код. Като резултат, PHP информационната страница ще се покажe.</p>
				<p>http://example.com/?code=phpinfo();</p>

		                <h4 id="code2">Изпълнение на системни команди</h4>
				<p>Атакуващият може да е способен да превърне инжектиране на код в инжектиране на команда в самата операционна система на сървъра. Използвайки примера от горната подточка, атакуващият може да изпълни командата whoami, изполвайки функцията system() на PHP</p>
				<p>http://example.com/?code=system('whoami');</p>
				<p>Веднъж получил достъп до системата, атакуващият има възможност да инсталира допълнителен зловреден софтуер и от там да постигне още по-големи щети върху системата и дори върху други системи в интернет.</p>

 				<h4 id="code3">Намиране и предотвратяване на инжектиран код</h4>
				<p>За щастие е много лесно да се тества дали сайт или уеб приложение е уязвимо от инжектиране на код и други потенциални слабости в системата, чрез използване на автоматизиран скенер за сайтове (например Acunetix vulnerability scanner.)</p>

				<p>Ако намерите уязвимост от инжектиране на код, най-ефективният метод за тяхното елиминиране е да се избягва оценяване на код на всяка цена освен ако не е абсолютно необходимо (например, няма друг начин да се постигне желаната функционалност освен чрез оценка на кода). Основно оценяване на код, който съдържа потребителски вход е опасно и почти винаги води до проблеми. Има популярна мантра за PHP оценявщата функция: “eval() is evil”. Ако оценяване на код е необходимо трябва да се използват силни валидации на входа. Това изисква колкото се може повече ограничения за непроверени данни. Важно е да се запомни, че атакуващите могат да използват различни инструменти, за да заобиколят валидиращите условия.</p>

				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

	
	<!-- ========== CRLF инжекции ========== -->	
	<section id="crlf" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>CRLIF инжекции </h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				
				<div class="col-lg-6 col-lg-offset-3">
				
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

	<!-- ========== Имейл инжекции ========== -->	
	<section id="mail" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>Имейл инжекции</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				
				<div class="col-lg-6 col-lg-offset-3">
				
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

	<!-- ========== Хедър атака срещу хоста ========== -->	
	<section id="header" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>Хедър атака срещу хоста</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				
				<div class="col-lg-6 col-lg-offset-3">
				
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

	<!-- ========== LDAP инжекции ========== -->	
	<section id="ldap" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>LDAP инжекции</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				
				<div class="col-lg-6 col-lg-offset-3">
				
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

	<!-- ========== Инжекции на шел команди ========== -->	
	<section id="shell" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>Инжекции на шел команди</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				
				<div class="col-lg-6 col-lg-offset-3">
				
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

	<!-- ========== Xpath инжекции ========== -->	
	<section id="xpath" name="portfolio"></section>
	<div id="f">
		<div class="container">
			<div class="row centered">
				<h3>Xpath инжекции</h3>
				<p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>
				
				<div class="col-lg-6 col-lg-offset-3">
				
				</div><!-- col-lg-8 -->
			</div><!-- row -->
		</div><!-- container -->
	</div>	<!-- f -->

       <!-- ========== Използвана литература ========== -->
        <section id="lit" name="portfolio"></section>
        <div id="f">
                <div class="container">
                        <div class="row centered">
                                <h3>Използвана литература</h3>
                                <p class="centered"><i class="icon icon-circle"></i><i class="icon icon-circle"></i><i class="icon icon-circle"></i></p>

                                <div class="col-lg-6 col-lg-offset-3">

                                </div><!-- col-lg-8 -->
                        </div><!-- row -->
                </div><!-- container -->
        </div>  <!-- f -->


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
	<script src="assets/js/classie.js"></script>
    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/smoothscroll.js"></script>
	<script src="assets/js/main.js"></script>
</body>
</html>
